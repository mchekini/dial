node{

    stage('checkout'){
        checkout([$class: 'GitSCM', branches: [[name: "*/$branch"]], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[url: 'https://github.com/mchekini/dial.git']]])
    }
    ws("workspace/${env.JOB_NAME}/back"){
        stage('build'){
            sh 'chmod +x gradlew'
            sh './gradlew build'
        }
        stage('deploy'){
            sh './gradlew deploy'
        }
    }
}